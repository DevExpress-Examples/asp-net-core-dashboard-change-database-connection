@page

@{
    Layout = null;
}
<!-- Add the following namespace usages: -->
@using DevExpress.AspNetCore
@using DevExpress.DashboardWeb
@using DevExpress.DashboardAspNetCore

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Add bundled resources. -->
    <link href="~/css/site.min.css" rel="stylesheet" />
    <script src="~/js/site.min.js"></script>
    <script type="text/javascript">
        //<![CDATA[
        function onBeforeRender(sender) {
            let dashboardControl = sender;
    
            dashboardControl.registerExtension(new DevExpress.Dashboard.DashboardPanelExtension(dashboardControl));
    
            let toolbarExtension = dashboardControl.findExtension("designerToolbar");
            
            if (toolbarExtension) {
                toolbarExtension.on("preparing", customizeDesignerToolbar);
            }
        }
    
        function customizeDesignerToolbar(e) {
            let dashboardControl = e.component;

            e.items.unshift({
                widget: 'dxButton',
                location: 'before',
                cssClass: 'dx-refresh-custom-button',
                options: {
                    text: 'DB1',
                    type: 'default'
                },
                onClick: () => {
                    dashboardControl.remoteService.headers = { "database": "nwind" };
                    dashboardControl.reloadData();
                }
            }, {
                widget: 'dxButton',
                location: 'before',
                cssClass: 'dx-refresh-custom-button',
                options: {
                    text: 'DB2',
                    type: 'default'
                },
                onClick: () => {
                    dashboardControl.remoteService.headers = { "database": "nwind2" };
                    dashboardControl.reloadData();
                }
            });
        }
        //]]>
    </script>
</head>
<body>
    <!-- Add the Web Dashboard with the "clientDashboardControl1" name to a View, specify its size, and set the Working Mode to Designer. -->
    <div style="position: absolute; left:0;top:0;right:0;bottom:0;">
        @(Html.DevExpress().Dashboard("clientDashboardControl1")
            .ControllerName("DefaultDashboard")
            .WorkingMode(WorkingMode.Designer)
            .OnBeforeRender("onBeforeRender")
            .Width("100%")
            .Height("100%")
        )
    </div>
</body>
</html>